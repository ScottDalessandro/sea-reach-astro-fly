---
// Booking Form Component for Astro
const { selectedWeek, selectedPrice, guests } = Astro.props;
---

<div class="booking-form-container">
  <form id="booking-form" class="booking-form">
    <div class="form-group">
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" required placeholder="John Smith">
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" required placeholder="john@example.com">
    </div>

    <div class="form-group">
      <label for="phone">Phone</label>
      <input type="tel" id="phone" name="phone" required placeholder="(555) 555-5555">
    </div>

    <div class="form-group">
      <label for="message">Message (Optional)</label>
      <textarea id="message" name="message" rows="4" placeholder="Any special requests or questions?"></textarea>
    </div>

    <div class="booking-details">
      <h4>Booking Details</h4>
      <div class="detail-row">
        <span>Selected Week:</span>
        <span>{selectedWeek}</span>
      </div>
      <div class="detail-row">
        <span>Number of Guests:</span>
        <span>{guests.adults + guests.children}</span>
      </div>
      <div class="detail-row">
        <span>Rate:</span>
        <span>${selectedPrice}</span>
      </div>
    </div>

    <button type="submit" class="submit-btn">Send Booking Request</button>
  </form>
</div>

<style>
  .booking-form-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 2rem;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  }

  .booking-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  label {
    font-weight: 600;
    color: #2c3e50;
  }

  input, textarea {
    padding: 0.75rem;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
  }

  input:focus, textarea:focus {
    outline: none;
    border-color: #2e8b8b;
  }

  .booking-details {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
    margin: 1rem 0;
  }

  .booking-details h4 {
    margin: 0 0 1rem 0;
    color: #2c3e50;
  }

  .detail-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    border-bottom: 1px solid #e0e0e0;
  }

  .detail-row:last-child {
    border-bottom: none;
  }

  .submit-btn {
    background: #2e8b8b;
    color: white;
    border: none;
    padding: 1rem 2rem;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .submit-btn:hover {
    background: #246b6b;
    transform: translateY(-2px);
  }

  @media (max-width: 768px) {
    .booking-form-container {
      padding: 1.5rem;
    }
  }
</style>

<script>
  document.getElementById('booking-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target as HTMLFormElement);
    const data = Object.fromEntries(formData.entries());
    
    try {
      // You can choose either email or Google Sheets here
      // For now, we'll use email as it's simpler
      const mailtoLink = `mailto:info@searench.com?subject=Booking Request for ${data.selectedWeek}&body=Name: ${data.name}%0D%0AEmail: ${data.email}%0D%0APhone: ${data.phone}%0D%0AMessage: ${data.message}`;
      window.location.href = mailtoLink;
    } catch (error) {
      console.error('Error submitting form:', error);
      alert('There was an error submitting your request. Please try again or email us directly.');
    }
  });
</script> 